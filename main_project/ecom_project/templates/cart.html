{% extends 'base.html' %}
{% load static %}
{% block main %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Your Cart</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
</head>
<style>
    body{
        background-color: #f3e5fcff;
    }
</style>
<body>
<div class="container py-5">
    <h2 class="mb-4">üõí Your Cart ({{ n }} items)</h2>

    {% if Masala %}
        <table class="table table-bordered align-middle">
            <thead class="table-light">
                <tr>
                    <th>Product</th>
                    <th>Image</th>
                    <th>Prize</th>
                    <th style="width: 180px;">Quantity</th>
                    <th>Subtotal</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for item in Masala %}
                    <tr>
                        <td>{{ item.pid.name }}</td>
                        <td>
                            <img src="{{ item.pid.img.url }}" alt="{{ item.pid.name }}" width="80" class="img-thumbnail">
                        </td>
                        <td>‚Çπ{{ item.pid.prize }}</td>
                        <td>
                            <div class="d-flex align-items-center justify-content-center">
                                <!-- - on left, + on right -->
                                <a href="{% url 'updateqty' 0 item.id %}" class="btn btn-sm btn-outline-danger me-2">‚àí</a>
                                <span>{{ item.qty }}</span>
                                <a href="{% url 'updateqty' 1 item.id %}" class="btn btn-sm btn-outline-success ms-2">+</a>
                            </div>
                        </td>
                        <td>‚Çπ{% widthratio item.pid.prize 1 item.qty %}</td>
                        <td>
                            <a href="{% url 'removepc' item.id %}" class="btn btn-sm btn-danger">Remove</a>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <div class="text-end mt-4">
            <h4>Total: ‚Çπ{{ total }}</h4>
        </div>

        <div class="d-flex justify-content-between mt-4">
            <a href="{% url 'index' %}" class="btn btn-secondary">‚Üê Continue Shopping</a>
            <form method="post" action="{% url 'placeorder' %}" class="m-0">
                {% csrf_token %}
                <button type="submit" class="btn btn-primary btn-lg">Place Order</button>
            </form>
        </div>
    {% else %}
        <div class="alert alert-info">Your cart is empty.</div>
        <a href="{% url 'index' %}" class="btn btn-primary">Shop Now</a>
    {% endif %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

{% endblock %}